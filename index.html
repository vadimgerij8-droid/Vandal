<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>SAYS UA ¬∑ –≤–µ–±-–ø–µ—Ä–µ–≥–ª—è–¥–∞—á</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0b0b0b; color: #f0f0f0; font-family: 'Inter', sans-serif; }
        .app { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header { background: #0a0a0a; border-bottom: 1px solid #2a2a2a; padding: 16px; }
        .logo { font-size: 2rem; font-weight: 800; color: white; }
        .search-box { display: flex; margin: 20px 0; background: #1a1a1a; border-radius: 40px; padding: 8px 18px; border: 1px solid #333; }
        .search-box input { background: transparent; border: none; color: white; width: 100%; outline: none; }
        .movies-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 20px; }
        .movie-card { background: #151515; border-radius: 20px; overflow: hidden; cursor: pointer; border: 1px solid #2a2a2a; transition: 0.2s; }
        .movie-card:hover { border-color: white; transform: translateY(-5px); }
        .movie-poster { aspect-ratio: 2/3; background: #1e1e1e; display: flex; align-items: center; justify-content: center; color: #555; }
        .movie-info { padding: 12px; }
        .movie-title { font-weight: 600; color: white; }
        .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.95); z-index:1000; align-items:center; justify-content:center; }
        .modal.active { display: flex; }
        .modal-content { background: #151515; max-width: 800px; width:90%; border-radius:30px; border:1px solid #333; }
        .modal-header { padding:20px; border-bottom:1px solid #2a2a2a; display:flex; justify-content:space-between; }
        .modal-body { padding:20px; }
        .player-container { aspect-ratio:16/9; background:#1a1a1a; border-radius:20px; margin-bottom:20px; }
        iframe { width:100%; height:100%; border:none; border-radius:20px; }
        .close { font-size:2rem; cursor:pointer; color:#aaa; }
        .close:hover { color:white; }
        .sources-list { display:flex; gap:10px; flex-wrap:wrap; }
        .source-btn { background:transparent; border:1px solid #555; color:white; padding:8px 16px; border-radius:40px; cursor:pointer; }
        .source-btn:hover { background:white; color:black; }
    </style>
</head>
<body>
<div class="app">
    <div class="header">
        <div class="logo">SAYS UA ¬∑ web</div>
        <div class="search-box">
            <i class="fas fa-search" style="color:#ccc; margin-right:10px;"></i>
            <input type="text" id="searchInput" placeholder="–ü–æ—à—É–∫ —Ñ—ñ–ª—å–º—ñ–≤...">
        </div>
    </div>

    <div class="movies-grid" id="moviesGrid">
        <div class="no-results">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
    </div>
</div>

<div class="modal" id="videoModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modalTitle"></h2>
            <span class="close" id="closeModal">&times;</span>
        </div>
        <div class="modal-body">
            <div class="player-container" id="playerContainer"></div>
            <div id="sourcesList" class="sources-list"></div>
        </div>
    </div>
</div>

<script>
    // –ü—Ä–æ–∫—Å—ñ –¥–ª—è –æ–±—Ö–æ–¥—É CORS
    const PROXY = 'https://api.allorigins.win/raw?url=';

    // –§—É–Ω–∫—Ü—ñ—è –ø–∞—Ä—Å–∏–Ω–≥—É —Å–∞–π—Ç—É uakino.club (–ø—Ä–∏–∫–ª–∞–¥)
    async function fetchMoviesFromUAKino() {
        try {
            const url = 'https://uakino.club/films/';
            const response = await fetch(PROXY + encodeURIComponent(url));
            const html = await response.text();

            // –ü–∞—Ä—Å–∏–Ω–≥ HTML (–ø—Ä–æ—Å—Ç–∏–π –ø—Ä–∏–∫–ª–∞–¥, –º–æ–∂–µ –≤—ñ–¥—Ä—ñ–∑–Ω—è—Ç–∏—Å—è)
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');
            const items = doc.querySelectorAll('.short-item'); // —Å–µ–ª–µ–∫—Ç–æ—Ä –ø–æ—Ç—Ä—ñ–±–Ω–æ —É—Ç–æ—á–Ω–∏—Ç–∏

            const movies = [];
            items.forEach(item => {
                const title = item.querySelector('.short-title')?.textContent?.trim() || '–ë–µ–∑ –Ω–∞–∑–≤–∏';
                const link = item.querySelector('a')?.href;
                const id = link?.match(/\/(\d+)-/)?.[1] || '';
                if (id) {
                    movies.push({
                        id,
                        title,
                        poster: item.querySelector('img')?.src || '',
                        year: '2024',
                        url: link
                    });
                }
            });
            return movies.slice(0, 20); // –æ–±–º–µ–∂–∏–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å
        } catch (e) {
            console.error('–ü–æ–º–∏–ª–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥—É:', e);
            return [];
        }
    }

    // –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –ø–ª–µ—î—Ä –¥–ª—è —Ñ—ñ–ª—å–º—É
    async function getPlayerUrl(movieId) {
        try {
            const url = `https://uakino.club/${movieId}-film.html`;
            const response = await fetch(PROXY + encodeURIComponent(url));
            const html = await response.text();
            // –®—É–∫–∞—î–º–æ iframe –ø–ª–µ—î—Ä–∞
            const match = html.match(/<iframe.*?src=["'](.*?)["']/i);
            return match ? match[1] : null;
        } catch (e) {
            return null;
        }
    }

    // –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤
    async function loadMovies() {
        const grid = document.getElementById('moviesGrid');
        grid.innerHTML = '<div class="no-results">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>';
        const movies = await fetchMoviesFromUAKino();
        if (movies.length === 0) {
            grid.innerHTML = '<div class="no-results">–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ—ñ–ª—å–º–∏</div>';
            return;
        }

        let html = '';
        movies.forEach(m => {
            html += `
                <div class="movie-card" data-id="${m.id}" data-title="${m.title}">
                    <div class="movie-poster">üé¨</div>
                    <div class="movie-info">
                        <div class="movie-title">${m.title}</div>
                    </div>
                </div>
            `;
        });
        grid.innerHTML = html;

        // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –∫–ª—ñ–∫—É
        document.querySelectorAll('.movie-card').forEach(card => {
            card.addEventListener('click', async () => {
                const id = card.dataset.id;
                const title = card.dataset.title;
                document.getElementById('modalTitle').textContent = title;
                const playerUrl = await getPlayerUrl(id);
                const playerContainer = document.getElementById('playerContainer');
                const sourcesList = document.getElementById('sourcesList');
                if (playerUrl) {
                    playerContainer.innerHTML = `<iframe src="${playerUrl}" allowfullscreen></iframe>`;
                    sourcesList.innerHTML = '';
                } else {
                    playerContainer.innerHTML = '<p style="color:#aaa; text-align:center;">–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–Ω–∞–π—Ç–∏ –ø–ª–µ—î—Ä</p>';
                }
                document.getElementById('videoModal').classList.add('active');
            });
        });
    }

    // –ó–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª–∫–∏
    document.getElementById('closeModal').addEventListener('click', () => {
        document.getElementById('videoModal').classList.remove('active');
        document.getElementById('playerContainer').innerHTML = '';
    });

    // –ü–æ—à—É–∫ (–∑–∞–≥–ª—É—à–∫–∞)
    document.getElementById('searchInput').addEventListener('input', (e) => {
        // –¢—É—Ç –º–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–æ—à—É–∫ –ø–æ —Å–∞–π—Ç—É
    });

    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
    loadMovies();
</script>
</body>
</html>
