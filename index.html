<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>SAYS UA ¬∑ –º–æ–±—ñ–ª—å–Ω–∏–π –∫—ñ–Ω–æ—Ç–µ–∞—Ç—Ä</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #0a0a0a;
            color: #e5e5e5;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        @import url('https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,600;14..32,800&display=swap');

        .app {
            max-width: 1440px;
            margin: 0 auto;
            padding: 0 16px;
        }

        /* ========== –ú–û–ë–Ü–õ–¨–ù–ï –ú–ï–ù–Æ ========== */
        .header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background-color: rgba(10, 10, 10, 0.98);
            backdrop-filter: blur(10px);
            padding: 12px 0 8px 0;
            border-bottom: 1px solid #2a2a2a;
        }

        .header-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            margin-bottom: 12px;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            color: white;
            text-decoration: none;
            white-space: nowrap;
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 8px;
            margin-left: auto;
        }

        .search-box {
            display: flex;
            align-items: center;
            background-color: #1a1a1a;
            border-radius: 40px;
            padding: 10px 16px;
            flex: 1;
            max-width: 400px;
            border: 1px solid #333;
            transition: border 0.2s;
            min-width: 0;
        }
        .search-box:focus-within {
            border-color: #777;
        }
        .search-box i {
            color: #777;
            margin-right: 8px;
            font-size: 1rem;
        }
        .search-box input {
            background: transparent;
            border: none;
            color: white;
            width: 100%;
            outline: none;
            font-size: 1rem;
        }
        .search-box input::placeholder {
            color: #555;
        }

        .user-icon {
            color: #ccc;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 8px;
            transition: color 0.2s;
        }
        .user-icon:hover {
            color: white;
        }

        /* –ù–∞–≤—ñ–≥–∞—Ü—ñ—è (–¥–µ—Å–∫—Ç–æ–ø) */
        .nav-links {
            display: flex;
            gap: 24px;
            font-weight: 500;
            border-bottom: 1px solid #222;
            padding-bottom: 8px;
            transition: all 0.3s;
        }
        .nav-links a {
            color: #aaa;
            text-decoration: none;
            font-size: 1rem;
            cursor: pointer;
            padding: 4px 0;
        }
        .nav-links a.active {
            color: white;
            border-bottom: 2px solid white;
        }

        /* ========== –ú–û–ë–Ü–õ–¨–ù–Ü –§–Ü–õ–¨–¢–†–ò ========== */
        .filter-section {
            margin: 20px 0;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .genre-chips {
            display: flex;
            flex-wrap: nowrap;
            overflow-x: auto;
            gap: 10px;
            padding: 4px 0 12px 0;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            white-space: nowrap;
        }
        .genre-chips::-webkit-scrollbar {
            display: none;
        }
        .chip {
            background-color: #1a1a1a;
            border: 1px solid #333;
            color: #ccc;
            padding: 10px 20px;
            border-radius: 40px;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s;
            flex-shrink: 0;
            -webkit-tap-highlight-color: transparent;
        }
        .chip.active {
            background-color: white;
            color: black;
            border-color: white;
            font-weight: 600;
        }
        .chip:active {
            transform: scale(0.95);
        }

        .sort-control {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #aaa;
            justify-content: flex-end;
        }
        .sort-control select {
            background-color: #1a1a1a;
            border: 1px solid #333;
            color: white;
            padding: 12px 32px 12px 16px;
            border-radius: 40px;
            font-size: 1rem;
            outline: none;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2'><polyline points='6 9 12 15 18 9'/></svg>");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
        }

        /* ========== –°–Ü–¢–ö–ê –ö–ê–†–¢–û–ö ========== */
        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 16px;
            margin: 20px 0 30px;
        }

        .movie-card {
            background-color: #121212;
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.2s;
            border: 1px solid #252525;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }
        .movie-card:active {
            transform: scale(0.97);
            background-color: #1a1a1a;
        }

        .card-poster {
            aspect-ratio: 2 / 3;
            background: linear-gradient(145deg, #2a2a2a 0%, #1a1a1a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #555;
            font-size: 2.5rem;
            font-weight: 600;
            border-bottom: 1px solid #2a2a2a;
            position: relative;
        }
        .card-poster span {
            opacity: 0.5;
        }
        .card-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background-color: rgba(255,255,255,0.9);
            color: black;
            font-size: 0.7rem;
            font-weight: 700;
            padding: 4px 8px;
            border-radius: 30px;
        }

        .card-info {
            padding: 12px;
        }
        .card-title {
            font-weight: 600;
            font-size: 0.95rem;
            color: white;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 42px;
        }
        .card-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 8px 0;
            font-size: 0.8rem;
        }
        .card-year {
            background-color: #1f1f1f;
            padding: 4px 12px;
            border-radius: 30px;
        }
        .card-imdb {
            display: flex;
            align-items: center;
            gap: 4px;
            background-color: #2b2b2b;
            padding: 4px 12px;
            border-radius: 30px;
            color: #f5c518;
        }
        .card-genres {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }
        .genre-tag {
            background-color: #1a1a1a;
            color: #bbb;
            font-size: 0.7rem;
            padding: 4px 10px;
            border-radius: 30px;
            border: 1px solid #2f2f2f;
        }
        .card-type {
            font-size: 0.7rem;
            color: #777;
            margin-top: 8px;
        }

        /* ========== –ú–û–î–ê–õ–¨–ù–ò–ô –ü–õ–ï–Ñ–† ========== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.95);
            z-index: 2000;
            flex-direction: column;
            padding: 16px;
        }
        .modal.active {
            display: flex;
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: white;
        }
        .modal-close {
            font-size: 2rem;
            cursor: pointer;
            padding: 8px;
        }
        .video-player {
            width: 100%;
            aspect-ratio: 16/9;
            background-color: black;
            border-radius: 12px;
            overflow: hidden;
        }
        #modalVideo {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        .modal-actions {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            justify-content: center;
        }
        .modal-btn {
            background: #1a1a1a;
            border: 1px solid #333;
            color: white;
            padding: 12px 24px;
            border-radius: 40px;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }
        .modal-btn:active {
            background: #333;
        }

        /* ========== –§–£–¢–ï–† ========== */
        .footer {
            border-top: 1px solid #222;
            padding: 30px 0;
            color: #666;
            font-size: 0.9rem;
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            justify-content: space-between;
        }
        .footer a {
            color: #aaa;
            text-decoration: none;
            cursor: pointer;
            padding: 8px 0;
            display: inline-block;
        }

        /* ========== –ú–ï–î–Ü–ê-–ó–ê–ü–ò–¢–ò ========== */
        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }
            
            .nav-links {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: #0a0a0a;
                padding: 20px;
                border-bottom: 1px solid #333;
                gap: 16px;
                box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            }
            .nav-links.mobile-open {
                display: flex;
            }
            .nav-links a {
                font-size: 1.2rem;
                padding: 12px;
            }

            .header-top {
                flex-wrap: wrap;
            }
            .search-box {
                order: 3;
                max-width: 100%;
                width: 100%;
            }
            .logo {
                font-size: 1.8rem;
            }
            .user-icon {
                font-size: 1.8rem;
            }
        }

        @media (max-width: 480px) {
            .movies-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            .card-title {
                font-size: 0.9rem;
            }
            .modal-btn {
                padding: 10px 16px;
                font-size: 0.9rem;
            }
        }

        .no-results {
            grid-column: 1/-1;
            text-align: center;
            padding: 40px;
            color: #666;
        }
    </style>
</head>
<body>
<div class="app">
    <!-- –®–ê–ü–ö–ê –ó –ú–û–ë–Ü–õ–¨–ù–ò–ú –ú–ï–ù–Æ -->
    <header class="header">
        <div class="header-top">
            <div class="logo">SAYS UA</div>
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="search" id="searchInput" placeholder="–ü–æ—à—É–∫...">
            </div>
            <div class="user-icon" id="userIcon">
                <i class="far fa-user-circle"></i>
            </div>
        </div>
        <div class="nav-links" id="navLinks">
            <a data-nav="home" class="active">–ì–æ–ª–æ–≤–Ω–∞</a>
            <a data-nav="movies">–§—ñ–ª—å–º–∏</a>
            <a data-nav="series">–°–µ—Ä—ñ–∞–ª–∏</a>
            <a data-nav="collections">–î–æ–±—ñ—Ä–∫–∏</a>
            <a data-nav="ratings">–†–µ–π—Ç–∏–Ω–≥–∏</a>
        </div>
    </header>

    <!-- –§–Ü–õ–¨–¢–†–ò -->
    <div class="filter-section">
        <div class="genre-chips" id="genreChips"></div>
        <div class="sort-control">
            <select id="sortSelect">
                <option value="default">–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º</option>
                <option value="rating">–ó–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–º IMDb</option>
                <option value="year">–ó–∞ —Ä–æ–∫–æ–º (–Ω–æ–≤—ñ—à—ñ)</option>
            </select>
        </div>
    </div>

    <!-- –°–Ü–¢–ö–ê –ö–û–ù–¢–ï–ù–¢–£ -->
    <main>
        <div class="movies-grid" id="moviesGrid"></div>
    </main>

    <!-- –ú–û–î–ê–õ–¨–ù–ï –í–Ü–ö–ù–û –ó –ü–õ–ï–Ñ–†–û–ú -->
    <div class="modal" id="videoModal">
        <div class="modal-header">
            <h2 id="modalTitle">–ù–∞–∑–≤–∞ —Ñ—ñ–ª—å–º—É</h2>
            <span class="modal-close" id="modalClose">&times;</span>
        </div>
        <div class="video-player">
            <video id="modalVideo" controls controlsList="nodownload" playsinline>
                <source src="#" type="video/mp4">
            </video>
        </div>
        <div class="modal-actions">
            <button class="modal-btn" id="addToFavorites"><i class="far fa-heart"></i> –í –æ–±—Ä–∞–Ω–µ</button>
            <button class="modal-btn" id="fullscreenBtn"><i class="fas fa-expand"></i> –ù–∞ –≤–µ—Å—å –µ–∫—Ä–∞–Ω</button>
        </div>
    </div>

    <!-- –§–£–¢–ï–† -->
    <footer class="footer">
        <div>¬© 2025 SAYS UA ‚Äî –∫—ñ–Ω–æ—Ç–µ–∞—Ç—Ä —É –∫–∏—à–µ–Ω—ñ</div>
        <div>
            <a id="footerAbout">–ü—Ä–æ –Ω–∞—Å</a>
            <a id="footerApi">API</a>
            <a id="footerSupport">–ü—ñ–¥—Ç—Ä–∏–º–∫–∞</a>
        </div>
    </footer>
</div>

<script>
    (function() {
        // ---------- –î–ê–ù–Ü –ó –í–Ü–î–ï–û–ü–û–°–ò–õ–ê–ù–ù–Ø–ú–ò (–ø—Ä–∏–∫–ª–∞–¥) ----------
        const movies = [
            { id: 1, title: "–¢.–Ü.–ú.", genres: ["–¢—Ä–∏–ª–µ—Ä–∏", "–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞", "–ñ–∞—Ö–∏"], year: 2023, imdb: 5.5, type: "movie", videoUrl: "https://example.com/video1.mp4" },
            { id: 2, title: "–ù–∞—Ç—Ö–Ω–µ–Ω–Ω–∏–∫ / –ì–µ–Ω—ñ–π", genres: ["–ö—Ä–∏–º—ñ–Ω–∞–ª", "–î—Ä–∞–º–∏"], year: 2024, imdb: 6.3, type: "movie", videoUrl: "https://example.com/video2.mp4" },
            { id: 3, title: "–ì–Ω–æ–º–∏: –ù–æ–≤—ñ –∫–∞–ø–µ–ª—é—Ö–∏", genres: ["–ü–æ–≤–Ω–æ–º–µ—Ç—Ä–∞–∂–Ω—ñ"], year: 2023, imdb: 5.9, type: "movie", videoUrl: "https://example.com/video3.mp4" },
            { id: 4, title: "–°—ñ—Å—É: –®–ª—è—Ö –¥–æ –ø–æ–º—Å—Ç–∏", genres: ["–ï–∫—à–Ω", "–í—ñ–π—Å—å–∫–æ–≤—ñ"], year: 2023, imdb: 6.8, type: "movie", videoUrl: "https://example.com/video4.mp4" },
            { id: 5, title: "–†–æ–∑—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è –õ—é—Å—ñ –õ–µ—Ç–±—ñ", genres: ["–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω–µ –∫—ñ–Ω–æ", "–ö—Ä–∏–º—ñ–Ω–∞–ª"], year: 2023, imdb: 5.5, type: "movie", videoUrl: "https://example.com/video5.mp4" },
            { id: 6, title: "–ú—ñ—Å—Ç–æ —Å—Ç—Ä–∞—Ö—É", genres: ["–ï–∫—à–Ω", "–î—Ä–∞–º–∏", "–ö—Ä–∏–º—ñ–Ω–∞–ª"], year: 2023, imdb: null, type: "movie", videoUrl: "https://example.com/video6.mp4" },
            { id: 7, title: "–ì—É–±–∫–∞ –ë–æ–± —É –∫—ñ–Ω–æ", genres: ["–ü–æ–≤–Ω–æ–º–µ—Ç—Ä–∞–∂–Ω—ñ"], year: 2023, imdb: 5.7, type: "movie", videoUrl: "https://example.com/video7.mp4" },
            { id: 8, title: "–ö–æ—Ä–æ–ª–µ–≤–∞ —à–∞—Ö—ñ–≤", genres: ["–î–æ–∫—É–º–µ–Ω—Ç–∞–ª—å–Ω–µ –∫—ñ–Ω–æ", "–ë—ñ–æ–≥—Ä–∞—Ñ—ñ—è"], year: 2023, imdb: 8.2, type: "movie", videoUrl: "https://example.com/video8.mp4" },
            { id: 9, title: "–ú—ñ—Å—ñ—è ¬´–°–∞–Ω—Ç–∞¬ª", genres: ["–ü–æ–≤–Ω–æ–º–µ—Ç—Ä–∞–∂–Ω—ñ"], year: 2023, imdb: 5.7, type: "movie", videoUrl: "https://example.com/video9.mp4" },
            { id: 10, title: "–ë–µ–∑ –±–ª–∏–∑–Ω—é–∫–∞", genres: ["–ö–æ–º–µ–¥—ñ—è", "–î—Ä–∞–º–∏"], year: 2023, imdb: 7.4, type: "movie", videoUrl: "https://example.com/video10.mp4" },
            { id: 11, title: "–°–ª—É–∂–Ω–∏—Ü—è", genres: ["–î–µ—Ç–µ–∫—Ç–∏–≤–∏", "–î—Ä–∞–º–∏", "–¢—Ä–∏–ª–µ—Ä–∏"], year: 2023, imdb: 7.0, type: "movie", videoUrl: "https://example.com/video11.mp4" },
            { id: 12, title: "–°–Ω—ñ–≥–æ–≤–∞ –∫–æ—Ä–æ–ª–µ–≤–∞", genres: ["–ü–æ–≤–Ω–æ–º–µ—Ç—Ä–∞–∂–Ω—ñ"], year: 2023, imdb: 6.1, type: "movie", videoUrl: "https://example.com/video12.mp4" },
            { id: 13, title: "–î–∏–≤–Ω—ñ –¥–∏–≤–∞ 5 —Å–µ–∑–æ–Ω", genres: ["–î–µ—Ç–µ–∫—Ç–∏–≤–∏", "–î—Ä–∞–º–∞", "–ñ–∞—Ö–∏", "–¢—Ä–∏–ª–µ—Ä–∏", "–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"], year: 2025, imdb: 8.6, type: "series", videoUrl: "https://example.com/video13.mp4" },
            { id: 14, title: "–°–≤—ñ—Ç–∞–Ω–∫–æ–≤–∞ –ô–æ–Ω–∞ 1 —Å–µ–∑–æ–Ω", genres: ["–ë–∞–≥–∞—Ç–æ—Å–µ—Ä—ñ–π–Ω–µ –∞–Ω—ñ–º–µ"], year: 2023, imdb: 8.0, type: "series", videoUrl: "https://example.com/video14.mp4" },
            { id: 15, title: "–ú–∞–Ω–¥—Ä—ñ–≤–Ω–∏–∫–∏ 1 —Å–µ–∑–æ–Ω", genres: ["–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞", "–î—Ä–∞–º–∞", "–î–µ—Ç–µ–∫—Ç–∏–≤–∏"], year: 2023, imdb: 8.0, type: "series", videoUrl: "https://example.com/video15.mp4" },
            { id: 16, title: "–í–æ–Ω–æ: –õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –≤ –î–µ—Ä—Ä—ñ", genres: ["–î—Ä–∞–º–∞", "–ñ–∞—Ö–∏"], year: 2025, imdb: 8.0, type: "series", videoUrl: "https://example.com/video16.mp4" },
            { id: 17, title: "–ü–ª–∞–Ω–∫—Ç–æ–Ω: –§—ñ–ª—å–º", genres: ["–ü–æ–≤–Ω–æ–º–µ—Ç—Ä–∞–∂–Ω—ñ"], year: 2024, imdb: 5.3, type: "movie", videoUrl: "https://example.com/video17.mp4" },
            { id: 18, title: "–ü–µ—Ä–µ–ª—ñ—Ç", genres: ["–ü–æ–≤–Ω–æ–º–µ—Ç—Ä–∞–∂–Ω—ñ"], year: 2023, imdb: 6.6, type: "movie", videoUrl: "https://example.com/video18.mp4" },
            { id: 19, title: "–§—Ä—ñ—Ä–µ–Ω 2 —Å–µ–∑–æ–Ω", genres: ["–ë–∞–≥–∞—Ç–æ—Å–µ—Ä—ñ–π–Ω–µ –∞–Ω—ñ–º–µ"], year: 2024, imdb: 8.9, type: "series", videoUrl: "https://example.com/video19.mp4" },
            { id: 20, title: "–ë–∏—Ç–≤–∞ –∑–∞ Uber", genres: ["–î—Ä–∞–º–∞"], year: 2023, imdb: 7.3, type: "series", videoUrl: "https://example.com/video20.mp4" }
        ];

        // ---------- –°–¢–ê–ù ----------
        let activeGenre = '–£—Å—ñ';
        let currentSort = 'default';
        let activeNav = 'home';
        let searchQuery = '';
        let favorites = JSON.parse(localStorage.getItem('saysua_favorites')) || [];

        // –ñ–∞–Ω—Ä–∏
        const allGenresSet = new Set();
        movies.forEach(m => m.genres.forEach(g => allGenresSet.add(g)));
        const allGenres = ['–£—Å—ñ', ...Array.from(allGenresSet).sort()];

        // DOM –µ–ª–µ–º–µ–Ω—Ç–∏
        const grid = document.getElementById('moviesGrid');
        const chipsContainer = document.getElementById('genreChips');
        const sortSelect = document.getElementById('sortSelect');
        const searchInput = document.getElementById('searchInput');
        const navLinks = document.querySelectorAll('#navLinks a');
        const userIcon = document.getElementById('userIcon');
        const menuToggle = document.getElementById('menuToggle');
        const mobileMenu = document.getElementById('navLinks');
        const modal = document.getElementById('videoModal');
        const modalClose = document.getElementById('modalClose');
        const modalVideo = document.getElementById('modalVideo');
        const modalTitle = document.getElementById('modalTitle');
        const addToFavBtn = document.getElementById('addToFavorites');
        const fullscreenBtn = document.getElementById('fullscreenBtn');
        const footerAbout = document.getElementById('footerAbout');
        const footerApi = document.getElementById('footerApi');
        const footerSupport = document.getElementById('footerSupport');

        let currentMovie = null;

        // ---------- –ú–û–ë–Ü–õ–¨–ù–ï –ú–ï–ù–Æ ----------
        menuToggle.addEventListener('click', () => {
            mobileMenu.classList.toggle('mobile-open');
        });

        // –ó–∞–∫—Ä–∏–≤–∞—Ç–∏ –º–µ–Ω—é –ø—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ –ø—É–Ω–∫—Ç
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.remove('mobile-open');
            });
        });

        // ---------- –§–£–ù–ö–¶–Ü–á –§–Ü–õ–¨–¢–†–ê–¶–Ü–á ----------
        function filterAndSortMovies() {
            let filtered = [...movies];

            // –ù–∞–≤—ñ–≥–∞—Ü—ñ—è
            if (activeNav === 'movies') {
                filtered = filtered.filter(m => m.type === 'movie');
            } else if (activeNav === 'series') {
                filtered = filtered.filter(m => m.type === 'series');
            } else if (activeNav === 'collections') {
                filtered = filtered.filter(m => m.imdb && m.imdb >= 8.0);
            } else if (activeNav === 'ratings') {
                filtered = filtered.sort((a, b) => (b.imdb ?? 0) - (a.imdb ?? 0));
            }

            // –ñ–∞–Ω—Ä
            if (activeGenre !== '–£—Å—ñ') {
                filtered = filtered.filter(m => m.genres.includes(activeGenre));
            }

            // –ü–æ—à—É–∫
            if (searchQuery) {
                const q = searchQuery.toLowerCase();
                filtered = filtered.filter(m => m.title.toLowerCase().includes(q));
            }

            // –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è
            if (currentSort === 'rating') {
                filtered.sort((a, b) => (b.imdb ?? 0) - (a.imdb ?? 0));
            } else if (currentSort === 'year') {
                filtered.sort((a, b) => b.year - a.year);
            }

            return filtered;
        }

        // ---------- –í–Ü–î–û–ë–†–ê–ñ–ï–ù–ù–Ø –ö–ê–†–¢–û–ö ----------
        function renderMovies(moviesArray) {
            if (!moviesArray.length) {
                grid.innerHTML = '<div class="no-results">üòï –ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</div>';
                return;
            }

            let html = '';
            moviesArray.forEach(m => {
                const posterLetters = m.title.split(' ').slice(0, 2).map(w => w[0]).join('').toUpperCase() || 'üé¨';
                const imdbValue = m.imdb ? m.imdb.toFixed(1) : '‚Äî';
                const displayGenres = m.genres.slice(0, 2);
                const extraCount = m.genres.length - 2;
                const isFavorite = favorites.includes(m.id);

                html += `
                    <div class="movie-card" data-id="${m.id}" data-favorite="${isFavorite}">
                        <div class="card-poster">
                            <span>${posterLetters}</span>
                            ${m.type === 'series' ? '<span class="card-badge"><i class="fas fa-tv"></i></span>' : ''}
                        </div>
                        <div class="card-info">
                            <div class="card-title">${m.title}</div>
                            <div class="card-meta">
                                <span class="card-year">${m.year}</span>
                                <span class="card-imdb"><i class="fab fa-imdb"></i> ${imdbValue}</span>
                            </div>
                            <div class="card-genres">
                                ${displayGenres.map(g => `<span class="genre-tag">${g}</span>`).join('')}
                                ${extraCount > 0 ? `<span class="genre-tag">+${extraCount}</span>` : ''}
                            </div>
                            <div class="card-type">${m.type === 'series' ? '–°–µ—Ä—ñ–∞–ª' : '–§—ñ–ª—å–º'}</div>
                        </div>
                    </div>
                `;
            });
            grid.innerHTML = html;

            // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –∫–ª—ñ–∫—ñ–≤ –Ω–∞ –∫–∞—Ä—Ç–∫–∏
            document.querySelectorAll('.movie-card').forEach(card => {
                card.addEventListener('click', () => {
                    const id = parseInt(card.dataset.id);
                    const movie = movies.find(m => m.id === id);
                    if (movie) openModal(movie);
                });
            });
        }

        // ---------- –ú–û–î–ê–õ–¨–ù–ò–ô –ü–õ–ï–Ñ–† ----------
        function openModal(movie) {
            currentMovie = movie;
            modalTitle.textContent = movie.title;
            modalVideo.src = movie.videoUrl || 'https://example.com/placeholder.mp4'; // –ó–∞–≥–ª—É—à–∫–∞
            modal.classList.add('active');
            
            // –û–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–∞–Ω –∫–Ω–æ–ø–∫–∏ "–í –æ–±—Ä–∞–Ω–µ"
            const isFav = favorites.includes(movie.id);
            addToFavBtn.innerHTML = isFav ? '<i class="fas fa-heart"></i> –í –æ–±—Ä–∞–Ω–æ–º—É' : '<i class="far fa-heart"></i> –í –æ–±—Ä–∞–Ω–µ';
            
            modalVideo.load();
        }

        modalClose.addEventListener('click', () => {
            modal.classList.remove('active');
            modalVideo.pause();
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.remove('active');
                modalVideo.pause();
            }
        });

        // –ü–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–∏–π —Ä–µ–∂–∏–º –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö
        fullscreenBtn.addEventListener('click', () => {
            if (modalVideo.requestFullscreen) {
                modalVideo.requestFullscreen();
            } else if (modalVideo.webkitEnterFullscreen) { // iOS
                modalVideo.webkitEnterFullscreen();
            }
        });

        // –†–æ–±–æ—Ç–∞ –∑ –æ–±—Ä–∞–Ω–∏–º
        addToFavBtn.addEventListener('click', () => {
            if (!currentMovie) return;
            
            const index = favorites.indexOf(currentMovie.id);
            if (index === -1) {
                favorites.push(currentMovie.id);
                addToFavBtn.innerHTML = '<i class="fas fa-heart"></i> –í –æ–±—Ä–∞–Ω–æ–º—É';
            } else {
                favorites.splice(index, 1);
                addToFavBtn.innerHTML = '<i class="far fa-heart"></i> –í –æ–±—Ä–∞–Ω–µ';
            }
            localStorage.setItem('saysua_favorites', JSON.stringify(favorites));
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –ø—ñ–¥—Å–≤—ñ—Ç–∫—É –Ω–∞ –∫–∞—Ä—Ç—Ü—ñ (—è–∫—â–æ —Ç—Ä–µ–±–∞)
            const card = document.querySelector(`.movie-card[data-id="${currentMovie.id}"]`);
            if (card) {
                card.dataset.favorite = favorites.includes(currentMovie.id);
            }
        });

        // ---------- –û–ù–û–í–õ–ï–ù–ù–Ø ----------
        function updateMovies() {
            const filtered = filterAndSortMovies();
            renderMovies(filtered);
        }

        // ---------- –ß–Ü–ü–°–ò –ñ–ê–ù–†–Ü–í ----------
        function renderChips() {
            chipsContainer.innerHTML = '';
            allGenres.forEach(genre => {
                const chip = document.createElement('span');
                chip.className = `chip ${activeGenre === genre ? 'active' : ''}`;
                chip.textContent = genre;
                chip.addEventListener('click', () => {
                    activeGenre = genre;
                    renderChips();
                    updateMovies();
                });
                chipsContainer.appendChild(chip);
            });
        }

        // ---------- –ù–ê–í–Ü–ì–ê–¶–Ü–Ø ----------
        function setActiveNav(target) {
            navLinks.forEach(link => {
                const nav = link.dataset.nav;
                link.classList.toggle('active', nav === target);
            });
        }

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                activeNav = link.dataset.nav;
                setActiveNav(activeNav);
                activeGenre = '–£—Å—ñ';
                renderChips();
                updateMovies();
            });
        });

        // ---------- –°–õ–£–•–ê–ß–Ü ----------
        sortSelect.addEventListener('change', (e) => {
            currentSort = e.target.value;
            updateMovies();
        });

        searchInput.addEventListener('input', (e) => {
            searchQuery = e.target.value;
            updateMovies();
        });

        userIcon.addEventListener('click', () => {
            alert('üë§ –û—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç. –£–ª—é–±–ª–µ–Ω–∏—Ö —Ñ—ñ–ª—å–º—ñ–≤: ' + favorites.length);
        });

        footerAbout.addEventListener('click', () => alert('SAYS UA ‚Äî –≤–∞—à –∫–∏—à–µ–Ω—å–∫–æ–≤–∏–π –∫—ñ–Ω–æ—Ç–µ–∞—Ç—Ä. –£—Å—ñ –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ñ–¥–µ–æ –Ω–∞–ª–µ–∂–∞—Ç—å —ó—Ö–Ω—ñ–º –≤–ª–∞—Å–Ω–∏–∫–∞–º.'));
        footerApi.addEventListener('click', () => alert('API documentation will be available soon.'));
        footerSupport.addEventListener('click', () => alert('–ù–∞–ø–∏—à—ñ—Ç—å –Ω–∞–º: support@saysua.example'));

        // ---------- –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø ----------
        renderChips();
        updateMovies();
        setActiveNav('home');
    })();
</script>
</body>
</html>
